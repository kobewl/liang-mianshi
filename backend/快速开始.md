# 快速开始指南

## 1️⃣ 环境准备

- JDK 21
- Maven 3.6+
- MySQL 8.0+

## 2️⃣ 数据库配置

### 执行建表 SQL
```bash
# 使用 MySQL 客户端执行
mysql -u root -p < sql/createSql.sql
```

或者在 MySQL 命令行中执行：
```sql
source sql/createSql.sql;
```

### 修改数据库连接
编辑 `src/main/resources/application.yml`:
```yaml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/liang_mianshi?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true
    username: root
    password: your-password
```

## 3️⃣ 启动项目

### 方式一：使用 Maven
```bash
mvn clean install
mvn spring-boot:run
```

### 方式二：使用 IDE
直接运行 `BackendApplication.java` 主类

## 4️⃣ 访问 API 文档

启动成功后，访问：
```
http://localhost:8184/doc.html
```

你将看到 Knife4j 的 API 文档界面，可以直接在线测试所有接口。

## 5️⃣ 测试接口

### 示例：创建用户
```json
POST http://localhost:8184/api/user
Content-Type: application/json

{
  "userAccount": "testuser",
  "userPassword": "123456",
  "userName": "测试用户",
  "userProfile": "这是一个测试用户"
}
```

### 示例：创建题库
```json
POST http://localhost:8184/api/question-bank
Content-Type: application/json

{
  "title": "Java 面试题库",
  "description": "包含 Java 基础、集合、多线程等面试题",
  "userId": 1
}
```

### 示例：创建题目
```json
POST http://localhost:8184/api/question
Content-Type: application/json

{
  "title": "什么是 JVM？",
  "content": "请简要说明 JVM 的作用和组成部分",
  "tags": "[\"Java\", \"JVM\"]",
  "answer": "JVM 是 Java 虚拟机，负责执行字节码...",
  "userId": 1
}
```

### 示例：将题目添加到题库
```json
POST http://localhost:8184/api/question-bank-question
Content-Type: application/json

{
  "questionBankId": 1,
  "questionId": 1,
  "userId": 1
}
```

## 6️⃣ 分页查询

```
GET http://localhost:8184/api/question/page?current=1&size=10
```

返回示例：
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "records": [...],
    "total": 100,
    "size": 10,
    "current": 1,
    "pages": 10
  }
}
```

## 📝 项目特点

✅ **MyBatis-Plus 集成**：简化 CRUD 操作，无需编写基础 SQL
✅ **自动分页**：使用 Page 对象，自动处理分页逻辑
✅ **逻辑删除**：删除操作自动转为更新，数据不会真正删除
✅ **自动填充**：创建时间、更新时间自动填充
✅ **API 文档**：Knife4j 提供可视化文档和在线测试
✅ **参数校验**：使用 Jakarta Validation 进行参数校验
✅ **统一响应**：使用 ApiResponse 统一封装返回数据

## 🔧 常见问题

### 1. 启动失败：数据库连接错误
- 检查 MySQL 是否启动
- 检查数据库连接配置是否正确
- 检查数据库是否已创建

### 2. 找不到 Mapper
- 确保已在实体类上添加 `@Mapper` 注解
- 或在启动类上添加 `@MapperScan("com.liangpiao.backend.mapper")`

### 3. API 文档访问 404
- 确认项目已成功启动
- 确认端口号是否正确（默认 8184）
- 访问 http://localhost:8184/doc.html

### 4. 跨域问题
- 已配置跨域支持，前端默认允许 http://localhost:3000
- 如需修改，编辑 `application.yml` 中的 `cors.allowed-origins`

## 📚 下一步

1. 完善用户认证和授权（JWT 已集成）
2. 添加 Redis 缓存
3. 添加文件上传功能（用户头像、题库图片）
4. 添加题目搜索功能（支持标题、标签搜索）
5. 添加题目收藏、点赞功能
6. 添加做题记录和统计功能

## 💡 提示

- 详细的 API 文档请访问 Knife4j 界面
- 所有接口都支持在 Knife4j 中直接测试
- 查看 `API说明.md` 了解更多技术细节


