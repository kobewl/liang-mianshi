# 代码生成清单

## 📦 依赖管理

### pom.xml
- ✅ 移除了 Spring Data JPA 依赖
- ✅ 添加了 Knife4j 依赖（4.3.0）
- ✅ 添加了 Hutool 工具类库（5.8.23）
- ✅ 保留了 MyBatis-Plus（3.5.14）
- ✅ 保留了 Lombok、JWT 等其他依赖

## 🗂️ 实体类（Entity）

| 文件 | 说明 | 特性 |
|------|------|------|
| `User.java` | 用户实体 | @TableLogic, @TableField(fill) |
| `Question.java` | 题目实体 | @TableLogic, @TableField(fill) |
| `QuestionBank.java` | 题库实体 | @TableLogic, @TableField(fill) |
| `QuestionBankQuestion.java` | 题库题目关联实体 | @TableField(fill) |

**实体类特点：**
- 使用 `@TableName` 指定表名
- 使用 `@TableId(type = IdType.AUTO)` 主键自增
- 使用 `@TableLogic` 实现逻辑删除
- 使用 `@TableField(fill = FieldFill.INSERT)` 自动填充创建时间
- 使用 `@TableField(fill = FieldFill.INSERT_UPDATE)` 自动填充更新时间

## 🗺️ Mapper 接口

| 文件 | 说明 |
|------|------|
| `UserMapper.java` | 用户数据访问层 |
| `QuestionMapper.java` | 题目数据访问层 |
| `QuestionBankMapper.java` | 题库数据访问层 |
| `QuestionBankQuestionMapper.java` | 题库题目关联数据访问层 |

**Mapper 特点：**
- 继承 `BaseMapper<T>` 获得基础 CRUD 方法
- 使用 `@Mapper` 注解标识
- 无需编写 XML 配置文件（简单查询）

## 🔧 Service 服务层

### Service 接口
| 文件 | 说明 |
|------|------|
| `UserService.java` | 用户服务接口 |
| `QuestionService.java` | 题目服务接口 |
| `QuestionBankService.java` | 题库服务接口 |
| `QuestionBankQuestionService.java` | 题库题目关联服务接口 |

### Service 实现类
| 文件 | 说明 |
|------|------|
| `UserServiceImpl.java` | 用户服务实现 |
| `QuestionServiceImpl.java` | 题目服务实现 |
| `QuestionBankServiceImpl.java` | 题库服务实现 |
| `QuestionBankQuestionServiceImpl.java` | 题库题目关联服务实现 |

**Service 特点：**
- 接口继承 `IService<T>` 获得丰富的服务方法
- 实现类继承 `ServiceImpl<Mapper, Entity>`
- 使用 `@Service` 注解标识

## 📝 DTO 数据传输对象

| 文件 | 说明 | 校验规则 |
|------|------|----------|
| `UserDTO.java` | 用户请求对象 | @NotBlank(账号、密码) |
| `QuestionDTO.java` | 题目请求对象 | @NotBlank(标题) |
| `QuestionBankDTO.java` | 题库请求对象 | @NotBlank(标题) |
| `QuestionBankQuestionDTO.java` | 题库题目关联请求对象 | @NotNull(题库ID、题目ID) |

**DTO 特点：**
- 使用 Jakarta Validation 进行参数校验
- 使用 Swagger 注解 `@Schema` 生成 API 文档
- 不包含敏感字段（如密码在 VO 中隐藏）

## 👁️ VO 视图对象

| 文件 | 说明 | 特点 |
|------|------|------|
| `UserVO.java` | 用户响应对象 | 不包含密码 |
| `QuestionVO.java` | 题目响应对象 | 包含完整信息 |
| `QuestionBankVO.java` | 题库响应对象 | 包含完整信息 |

**VO 特点：**
- 使用 `@JsonFormat` 格式化时间字段
- 使用 `@Schema` 注解生成 API 文档
- 过滤敏感字段

## 🎮 Controller 控制器

| 文件 | 路径 | 说明 |
|------|------|------|
| `UserController.java` | `/api/user` | 用户管理接口 |
| `QuestionController.java` | `/api/question` | 题目管理接口 |
| `QuestionBankController.java` | `/api/question-bank` | 题库管理接口 |
| `QuestionBankQuestionController.java` | `/api/question-bank-question` | 题库题目关联接口 |

**Controller 特点：**
- 使用 `@Tag` 注解分组
- 使用 `@Operation` 注解说明接口
- 使用 `@Parameter` 注解说明参数
- 使用 `@Valid` 开启参数校验
- 使用 `@RequiredArgsConstructor` 注入依赖
- 统一使用 `ApiResponse<T>` 封装响应

### 每个 Controller 提供的接口：
1. **POST /** - 创建资源
2. **PUT /{id}** - 更新资源
3. **DELETE /{id}** - 删除资源（逻辑删除）
4. **GET /{id}** - 获取详情
5. **GET /page** - 分页查询

## ⚙️ 配置类

| 文件 | 说明 |
|------|------|
| `Knife4jConfig.java` | Knife4j/OpenAPI 配置 |
| `MybatisPlusConfig.java` | MyBatis-Plus 配置（分页、自动填充） |
| `CorsConfig.java` | 跨域配置（已存在） |

**MybatisPlusConfig 功能：**
1. 分页插件配置
2. 自动填充 createTime、updateTime、editTime

## 📄 配置文件

### application.yml
- ✅ 移除了 JPA 配置
- ✅ 添加了 MyBatis-Plus 配置
  - 驼峰命名转换
  - 日志输出
  - 逻辑删除配置
- ✅ 添加了 Knife4j 配置
  - OpenAPI 文档路径
  - Swagger UI 路径
  - 中文界面

## 📋 其他文件

| 文件 | 说明 |
|------|------|
| `BackendApplication.java` | 主启动类，添加了 @MapperScan |
| `BackendApplicationTests.java` | 测试类 |
| `API说明.md` | 详细的 API 使用文档 |
| `快速开始.md` | 快速启动指南 |
| `代码清单.md` | 本文件 |

## 🎯 MyBatis-Plus 简化点

### 1. Mapper 层简化
**传统方式：**
```java
@Mapper
public interface UserMapper {
    int insert(User user);
    int updateById(User user);
    int deleteById(Long id);
    User selectById(Long id);
    List<User> selectList();
}
```

**MyBatis-Plus 方式：**
```java
@Mapper
public interface UserMapper extends BaseMapper<User> {
    // 继承即拥有所有基础方法，无需编写
}
```

### 2. Service 层简化
**传统方式：**
```java
@Service
public class UserServiceImpl implements UserService {
    @Autowired
    private UserMapper userMapper;
    
    public boolean save(User user) {
        return userMapper.insert(user) > 0;
    }
    // ... 更多方法
}
```

**MyBatis-Plus 方式：**
```java
@Service
public class UserServiceImpl extends ServiceImpl<UserMapper, User> implements UserService {
    // 继承即拥有丰富的服务方法，无需编写
}
```

### 3. 分页查询简化
**传统方式：**
```java
PageHelper.startPage(pageNum, pageSize);
List<User> list = userMapper.selectList();
PageInfo<User> pageInfo = new PageInfo<>(list);
```

**MyBatis-Plus 方式：**
```java
Page<User> page = userService.page(new Page<>(current, size), queryWrapper);
```

### 4. 逻辑删除简化
**传统方式：**
```java
user.setIsDelete(1);
userMapper.updateById(user);
```

**MyBatis-Plus 方式：**
```java
userService.removeById(id);  // 自动将 isDelete 设置为 1
```

### 5. 条件查询简化
**传统方式：**
```xml
<select id="selectByCondition">
    SELECT * FROM user WHERE 1=1
    <if test="name != null">AND name = #{name}</if>
    <if test="age != null">AND age = #{age}</if>
</select>
```

**MyBatis-Plus 方式：**
```java
QueryWrapper<User> wrapper = new QueryWrapper<>();
wrapper.eq("name", name).eq("age", age);
List<User> list = userService.list(wrapper);

// 或使用 Lambda 方式（类型安全）
LambdaQueryWrapper<User> wrapper = new LambdaQueryWrapper<>();
wrapper.eq(User::getName, name).eq(User::getAge, age);
```

## 📊 代码统计

- **实体类**: 4 个
- **Mapper 接口**: 4 个
- **Service 接口**: 4 个
- **Service 实现类**: 4 个
- **DTO 类**: 4 个
- **VO 类**: 3 个（UserVO, QuestionVO, QuestionBankVO）
- **Controller 类**: 4 个
- **配置类**: 3 个
- **总计**: 约 30 个 Java 文件

## ✨ 代码质量保障

- ✅ 所有类都有详细的中文注释
- ✅ 所有字段都有 JavaDoc 说明
- ✅ 统一使用 Lombok 减少样板代码
- ✅ 使用 Hutool 工具类进行 Bean 转换
- ✅ 参数校验注解完整
- ✅ API 文档注解完整
- ✅ 无 Linter 错误

## 🚀 快速使用

1. 启动项目
2. 访问 http://localhost:8184/doc.html
3. 在 Knife4j 界面中可以直接测试所有接口
4. 无需 Postman 等工具


